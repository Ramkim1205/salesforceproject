@RestResource(urlMapping='/checkAccount/*')
global with sharing class CheckAccountService {
    @HttpGet
    global static void doGet() {

        
        // ë°ì´í„° ì¡°íšŒ: Email í•„ë“œ í™•ì¸
        List<Account> accounts = [SELECT Id, Name, Email__c FROM Account WHERE Email__c = :email LIMIT 1];
        System.debug('ğŸ” Query executed. Result: ' + accounts);
        
        Map<String, Object> result = new Map<String, Object>();
        if (!accounts.isEmpty()) {
            result.put('found', true);
            result.put('accountId', accounts[0].Id);
            result.put('accountName', accounts[0].Name);
            System.debug('âœ… Account found: ' + accounts[0].Id + ' (' + accounts[0].Name + ')');
        } else {
            result.put('found', false);
            System.debug('âš ï¸ No account found for email: ' + email);
        }
        
        // JSON ì‘ë‹µ
        String jsonResponse = JSON.serialize(result);
        System.debug('ğŸ”¹ Response sent: ' + jsonResponse);
        RestContext.response.responseBody = Blob.valueOf(jsonResponse);
        RestContext.response.statusCode = 200;
    }
}